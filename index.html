chrome.storage.sync.get("settings", data => {
  useSettings(data.settings);
});

useSettings(undefined); // runs too early
chrome.runtime.sendMessage({ type: "PING" }, response => {
  console.log(response.ok); // crashes if undefined
});
document.querySelector("#btn").addEventListener("click", doThing);
chrome.tabs.onUpdated.addListener(() => {
  chrome.tabs.reload();
});
chrome.storage.sync.set({ count: count + 1 });
setTimeout(() => {
  doLongTask();
}, 10000);
